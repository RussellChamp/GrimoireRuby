#!/usr/env ruby
#
#grimoire v0.1
#by Russell Champoux

require './intelligence'

module Grimoire

	@wondrous_items_url = "http://paizo.com/pathfinderRPG/prd/magicItems/wondrousItems.html"
	@wondrous_items_minor = [
		['Feather token, anchor', 50, @wondrous_items_url + "#feather-token"],
		['Universal solvent', 50],
		['Elixir of love', 150],
		['Unguent of timelessness', 150],
		['Feather token, fan', 200],
		['Dust of tracelessness', 250],
		['Elixir of hiding', 250],
		['Elixir of tumbling', 250],
		['Elixir of swimming', 250],
		['Elixir of vision', 250],
		['Silversheen', 250],
		['Feather token, bird', 300],
		['Feather token, tree', 400],
		['Feather token, swan boat', 450],
		['Elixir of truth', 500],
		['Feather token, whip', 500],
		['Dust of dryness', 850],
		['Hand of the mage', 900],
		['Bracers of armor +1', 1000],
		['Cloak of resistance +1', 1000],
		['Pearl of power, 1st-level spell', 1000],
		['Phylactery of faithfulness', 1000],
		['Salve of slipperiness', 1000],
		['Elixir of fire breath', 1100],
		['Pipes of the sewers', 1150],
		['Dust of illusion', 1200],
		['Brooch of shielding', 1500],
		['Necklace of fireballs type I', 1650],
		['Dust of appearance', 1800],
		['Hat of disguise', 1800],
		['Pipes of sounding', 1800],
		['Efficient quiver', 1800],
		['Amulet of natural armor +1', 2000],
		['Handy haversack', 2000],
		['Horn of fog', 2000],
		['Elemental gem', 2250],
		['Robe of bones', 2400],
		['Sovereign glue', 2400],
		['Bag of holding type I', 2500],
		['Boots of elvenkind', 2500],
		['Boots of the winterlands', 2500],
		['Candle of truth', 2500],
		['Cloak of elvenkind', 2500],
		['Eyes of the eagle', 2500],
		['Goggles of minute seeing', 2500],
		['Scarab, golembane', 2500],
		['Necklace of fireballs type II', 2700],
		['Stone of alarm', 2700],
		['Bead of force', 3000],
		['Chime of opening', 3000],
		['Horseshoes of speed', 3000],
		['Rope of climbing', 3000],
		['Bag of tricks, gray', 3400],
		['Dust of disappearance', 3500],
		['Lens of detection', 3500],
		['Vestment, druid\'s', 3750],
		['Figurine of wondrous power, silver raven', 3800],
		['Belt of giant strength +2', 4000],
		['Belt of incredible dexterity +2', 4000],
		['Belt of mighty constitution +2', 4000],
		['Bracers of armor +2', 4000],
		['Cloak of resistance +2', 4000],
		['Gloves of arrow snaring', 4000],
		['Headband of alluring charisma +2', 4000],
		['Headband of inspired wisdom +2', 4000],
		['Headband of vast intelligence +2', 4000],
		['Ioun stone, clear spindle', 4000],
		['Restorative ointment', 4000],
		['Marvelous pigments', 4000],
		['Pearl of power, 2nd-level spell', 4000],
		['Stone salve', 4000],
		['Necklace of fireballs type III', 4350],
		['Circlet of persuasion', 4500],
		['Slippers of spider climbing', 4800],
		['Incense of meditation', 4900],
		['Amulet of mighty fists +1', 5000],
		['Bag of holding type II', 5000],
		['Bracers of archery, lesser', 5000],
		['Ioun stone, dusty rose prism', 5000],
		['Helm of comprehend languages and read magic', 5200],
		['Vest of escape', 5200],
		['Eversmoking bottle', 5400],
		['Sustaining spoon', 5400],
		['Necklace of fireballs type IV', 5400],
		['Boots of striding and springing', 5500],
		['Wind fan', 5500],
		['Necklace of fireballs type V', 5850],
		['Horseshoes of a zephyr', 6000],
		['Pipes of haunting', 6000],
		['Gloves of swimming and climbing', 6250],
		['Crown of blasting, minor', 6480],
		['Horn of goodness/evil', 6500],
		['Robe of useful items', 7000],
		['Boat, folding', 7200],
		['Cloak of the manta ray', 7200],
		['Bottle of air', 7250],
		['Bag of holding type III', 7400],
		['Periapt of health', 7400],
		['Boots of levitation', 7500],
		['Harp of charming', 7500]
	] #100 minor wondrous items

	@wondrous_items_medium = [
		['Amulet of natural armor +2', 8000, @wondrous_items_url + "#amulet-of-natural-armor"],
		['Golem manual, flesh', 8000],
		['Hand of glory', 8000],
		['Ioun stone, deep red sphere', 8000],
		['Ioun stone, incandescent blue sphere', 8000],
		['Ioun stone, pale blue rhomboid', 8000],
		['Ioun stone, pink and green sphere', 8000],
		['Ioun stone, pink rhomboid', 8000],
		['Ioun stone, scarlet and blue sphere', 8000],
		['Deck of illusions', 8100],
		['Necklace of fireballs type VI', 8100],
		['Candle of invocation', 8400],
		['Robe of blending', 8400],
		['Bag of tricks, rust', 8500],
		['Necklace of fireballs type VII', 8700],
		['Bracers of armor +3', 9000],
		['Cloak of resistance +3', 9000],
		['Decanter of endless water', 9000],
		['Necklace of adaptation', 9000],
		['Pearl of power, 3rd-level spell', 9000],
		['Figurine of wondrous power, serpentine owl', 9100],
		['Strand of prayer beads, lesser', 9600],
		['Bag of holding type IV', 10000],
		['Belt of physical might +2', 10000],
		['Figurine of wondrous power, bronze griffon', 10000],
		['Figurine of wondrous power, ebony fly', 10000],
		['Glove of storing', 10000],
		['Headband of mental prowess +2', 10000],
		['Ioun stone, dark blue rhomboid', 10000],
		['Cape of the mountebank', 10080],
		['Phylactery of negative channeling', 11000],
		['Phylactery of positive channeling', 11000],
		['Gauntlet of rust', 11500],
		['Boots of speed', 12000],
		['Goggles of night', 12000],
		['Golem manual, clay', 12000],
		['Medallion of thoughts', 12000],
		['Blessed book', 12500],
		['Gem of brightness', 13000],
		['Lyre of building', 13000],
		['Robe, Monk\'s', 13000],
		['Cloak of arachnida', 14000],
		['Belt of dwarvenkind', 14900],
		['Periapt of wound closure', 15000],
		['Pearl of the sirines', 15300],
		['Figurine of wondrous power, onyx dog', 15500],
		['Bag of tricks, tan', 16000],
		['Belt of giant strength +4', 16000],
		['Belt of incredible dexterity +4', 16000],
		['Belt of mighty constitution +4', 16000],
		['Belt of physical perfection +2', 16000],
		['Boots, winged', 16000],
		['Bracers of armor +4', 16000],
		['Cloak of resistance +4', 16000],
		['Headband of alluring charisma +4', 16000],
		['Headband of inspired wisdom +4', 16000],
		['Headband of mental superiority +2', 16000],
		['Headband of vast intelligence +4', 16000],
		['Pearl of power, 4th-level spell', 16000],
		['Scabbard of keen edges', 16000],
		['Figurine of wondrous power, golden lions', 16500],
		['Chime of interruption', 16800],
		['Broom of flying', 17000],
		['Figurine of wondrous power, marble elephant', 17000],
		['Amulet of natural armor +3', 18000],
		['Ioun stone, iridescent spindle', 18000],
		['Bracelet of friends', 19000],
		['Amulet of mighty fists +2', 20000],
		['Carpet of flying, 5 ft. by 5 ft.', 20000],
		['Horn of blasting', 20000],
		['Ioun stone, pale lavender ellipsoid', 20000],
		['Ioun stone, pearly white spindle', 20000],
		['Portable hole', 20000],
		['Stone of good luck (luckstone)', 20000],
		['Figurine of wondrous power, ivory goats', 21000],
		['Rope of entanglement', 21000],
		['Golem manual, stone', 22000],
		['Mask of the skull', 22000],
		['Mattock of the titans', 23348],
		['Crown of blasting, major', 23760],
		['Cloak of displacement, minor', 24000],
		['Helm of underwater action', 24000],
		['Bracers of archery, greater', 25000],
		['Bracers of armor +5', 25000],
		['Cloak of resistance +5', 25000],
		['Eyes of doom', 25000],
		['Pearl of power, 5th-level spell', 25000],
		['Maul of the titans', 25305],
		['Cloak of the bat', 26000],
		['Iron bands of binding', 26000],
		['Cube of frost resistance', 27000],
		['Helm of telepathy', 27000],
		['Periapt of proof against poison', 27000],
		['Robe of scintillating colors', 27000],
		['Manual of bodily health +1', 27500],
		['Manual of gainful exercise +1', 27500],
		['Manual of quickness in action +1', 27500],
		['Tome of clear thought +1', 27500],
		['Tome of leadership and influence +1', 27500],
		['Tome of understanding +1', 27500]
	] #100 medium wondrous items

	@wondrous_items_major = [
		['Dimensional shackles', 28000, @wondrous_items_url + "#dimensional-shackles"],
		['Figurine of wondrous power, obsidian steed', 28500],
		['Drums of panic', 30000],
		['Ioun stone, orange prism', 30000],
		['Ioun stone, pale green prism', 30000],
		['Lantern of revealing', 30000],
		['Amulet of natural armor +4', 32000],
		['Amulet of proof against detection and location', 35000],
		['Carpet of flying, 5 ft. by 10 ft.', 35000],
		['Golem manual, iron', 35000],
		['Belt of giant strength +6', 36000],
		['Belt of incredible dexterity +6', 36000],
		['Belt of mighty constitution +6', 36000],
		['Bracers of armor +6', 36000],
		['Headband of alluring charisma +6', 36000],
		['Headband of inspired wisdom +6', 36000],
		['Headband of vast intelligence +6', 36000],
		['Ioun stone, vibrant purple prism', 36000],
		['Pearl of power, 6th-level spell', 36000],
		['Scarab of protection', 38000],
		['Belt of physical might +4', 40000],
		['Headband of mental prowess +4', 40000],
		['Ioun stone, lavender and green ellipsoid', 40000],
		['Ring gates', 40000],
		['Crystal ball', 42000],
		['Golem manual, stone guardian', 44000],
		['Amulet of mighty fists +3', 45000],
		['Strand of prayer beads', 45800],
		['Orb of storms', 48000],
		['Boots of teleportation', 49000],
		['Bracers of armor +7', 49000],
		['Pearl of power, 7th-level spell', 49000],
		['Amulet of natural armor +5', 50000],
		['Cloak of displacement, major', 50000],
		['Crystal ball with see invisibility', 50000],
		['Horn of Valhalla', 50000],
		['Crystal ball with detect thoughts', 51000],
		['Wings of flying', 54000],
		['Cloak of etherealness', 55000],
		['Instant fortress', 55000],
		['Manual of bodily health +2', 55000],
		['Manual of gainful exercise +2', 55000],
		['Manual of quickness in action +2', 55000],
		['Tome of clear thought +2', 55000],
		['Tome of leadership and influence +2', 55000],
		['Tome of understanding +2', 55000],
		['Eyes of charming', 56000],
		['Robe of stars', 58000],
		['Carpet of flying, 10 ft. by 10 ft.', 60000],
		['Darkskull', 60000],
		['Cube of force', 62000],
		['Belt of physical perfection +4', 64000],
		['Bracers of armor +8', 64000],
		['Headband of mental superiority +4', 64000],
		['Pearl of power, 8th-level spell', 64000],
		['Crystal ball with telepathy', 70000],
		['Horn of blasting, greater', 70000],
		['Pearl of power, two spells', 70000],
		['Helm of teleportation', 73500],
		['Gem of seeing', 75000],
		['Robe of the archmagi', 75000],
		['Mantle of faith', 76000],
		['Amulet of mighty fists +4', 80000],
		['Crystal ball with true seeing', 80000],
		['Pearl of power, 9th-level spell', 81000],
		['Well of many worlds', 82000],
		['Manual of bodily health +3', 82500],
		['Manual of gainful exercise +3', 82500],
		['Manual of quickness in action +3', 82500],
		['Tome of clear thought +3', 82500],
		['Tome of leadership and influence +3', 82500],
		['Tome of understanding +3', 82500],
		['Apparatus of the crab', 90000],
		['Belt of physical might +6', 90000],
		['Headband of mental prowess +6', 90000],
		['Mantle of spell resistance', 90000],
		['Mirror of opposition', 92000],
		['Strand of prayer beads, greater', 95800],
		['Manual of bodily health +4', 110000],
		['Manual of gainful exercise +4', 110000],
		['Manual of quickness in action +4', 110000],
		['Tome of clear thought +4', 110000],
		['Tome of leadership and influence +4', 110000],
		['Tome of understanding +4', 110000],
		['Amulet of the planes', 120000],
		['Robe of eyes', 120000],
		['Amulet of mighty fists +5', 125000],
		['Helm of Brilliance', 125000],
		['Manual of bodily health +5', 137500],
		['Manual of gainful exercise +5', 137500],
		['Manual of quickness in action +5', 137500],
		['Tome of clear thought +5', 137500],
		['Tome of leadership and influence +5', 137500],
		['Tome of understanding +5', 137500],
		['Belt of physical perfection +6', 144000],
		['Headband of mental superiority +6', 144000],
		['Efreeti bottle', 145000],
		['Cubic gate', 164000],
		['Iron flask', 170000],
		['Mirror of life trapping', 200000]
	] #100 major wondrous items


	def Grimoire.get_wondrous_items(num_minor = 0, num_medium = 0, num_major = 0)
		ret_items = []
		#TODO: clean up code so that when you return duplicate items it is more obvious
		num_minor.times{
			item = @wondrous_items_minor[rand(0...@wondrous_items_minor.count)]
			case rand(1..100)
				when 1
					item_intelligence = get_item_intelligence(item[1])
					ret_items << ['Intellegent ' + item[0] + ' [' + item_intelligence[0] + ']', item[1] + item_intelligence[1]]
				when 2..31
					ret_items << [item[0] + ' (with a clue as to its purpose)', item[1]]
				else
					ret_items << item
			end
		}
		num_medium.times{
			item = @wondrous_items_medium[rand(0...@wondrous_items_medium.count)]
			case rand(1..100)
				when 1
					item_intelligence = get_item_intelligence(item[1])
					ret_items << ['Intellegent ' + item[0] + ' [' + item_intelligence[0] + ']', item[1] + item_intelligence[1]]
				when 2..31
					ret_items << [item[0] + ' (with a clue as to its purpose)', item[1]]
				else
					ret_items << item
			end
		}
		num_major.times{
			item = @wondrous_items_major[rand(0...@wondrous_items_major.count)]
			case rand(1..100)
				when 1
					item_intelligence = get_item_intelligence(item[1])
					ret_items << ['Intellegent ' + item[0] + ' [' + item_intelligence[0] + ']', item[1] + item_intelligence[1]]
				when 2..31
					ret_items << [item[0] + ' (with a clue as to its purpose)', item[1]]
				else
					ret_items << item
			end
		}
		return ret_items
	end

	def Grimoire.debug_wondrous_items
		puts "-- WONDROUS ITEMS DEBUG --"
		puts "@wondrous_items_minor count = " + @wondrous_items_minor.count.to_s
		puts "@wondrous_items_medium count = " + @wondrous_items_medium.count.to_s
		puts "@wondrous_items_major count = " + @wondrous_items_major.count.to_s
	end
end